import{r as v,j as r}from"./client-CCeUhWoO.js";import{c as A}from"./compiler-runtime-SGDwveJu.js";import{r as T,S as C}from"./Sidebar-BQP8Ezvk.js";function q(){const e=A.c(38);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[a,x]=v.useState(t),[s,g]=v.useState(null);let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[1]=m):m=e[1];const[c,f]=v.useState(m);let n;e[2]!==s?(n=()=>{T.chat.listThreads().then(o=>{x(o),!s&&o.length&&g(o[0].id)})},e[2]=s,e[3]=n):n=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[4]=l):l=e[4],v.useEffect(n,l);let i,d;e[5]!==s?(i=()=>s?T.chat.subscribe(s,f):void 0,d=[s],e[5]=s,e[6]=i,e[7]=d):(i=e[6],d=e[7]),v.useEffect(i,d);let b;e[8]!==s||e[9]!==a?(b=a.find(o=>o.id===s)?.title??"",e[8]=s,e[9]=a,e[10]=b):b=e[10];const _=b;let $;e[11]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(C,{}),e[11]=$):$=e[11];let I;e[12]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx("header",{className:"border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:r.jsx("h2",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Samtaler"})}),e[12]=I):I=e[12];let u;if(e[13]!==s||e[14]!==a){let o;e[16]!==s?(o=S=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>g(S.id),className:`flex w-full items-center gap-3 px-4 py-3 text-left
                    ${S.id===s?"bg-blue-50 dark:bg-blue-950":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,"aria-current":S.id===s?"true":"false",children:[r.jsx("span",{className:"inline-flex h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700","aria-hidden":!0}),r.jsxs("span",{className:"min-w-0",children:[r.jsx("strong",{className:"block truncate text-sm text-gray-900 dark:text-white",children:S.title}),r.jsx("span",{className:"block truncate text-xs text-gray-500 dark:text-gray-400",children:S.lastMessage??"Â "})]})]})},S.id),e[16]=s,e[17]=o):o=e[17],u=a.map(o),e[13]=s,e[14]=a,e[15]=u}else u=e[15];let h;e[18]!==u?(h=r.jsxs("section",{className:"w-80 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[I,r.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u})]}),e[18]=u,e[19]=h):h=e[19];let y;e[20]!==_?(y=r.jsx("header",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:r.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:_})}),e[20]=_,e[21]=y):y=e[21];let p;e[22]!==c?(p=c.map(D),e[22]=c,e[23]=p):p=e[23];let k;e[24]!==p?(k=r.jsx("section",{className:"flex-1 space-y-3 overflow-y-auto px-6 py-4",children:p}),e[24]=p,e[25]=k):k=e[25];const M=!s;let j;e[26]!==s?(j=async o=>{!s||!o.trim()||await T.chat.send(s,o.trim())},e[26]=s,e[27]=j):j=e[27];let N;e[28]!==M||e[29]!==j?(N=r.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4",children:r.jsx(z,{disabled:M,onSend:j})}),e[28]=M,e[29]=j,e[30]=N):N=e[30];let w;e[31]!==y||e[32]!==k||e[33]!==N?(w=r.jsxs("section",{className:"flex min-h-[80vh] flex-1 flex-col bg-white dark:bg-gray-900",children:[y,k,N]}),e[31]=y,e[32]=k,e[33]=N,e[34]=w):w=e[34];let E;return e[35]!==h||e[36]!==w?(E=r.jsx("section",{className:"min-h-screen bg-gray-100 dark:bg-gray-950",children:r.jsxs("main",{className:"mx-auto flex max-w-[1400px] gap-0 p-4",children:[$,h,w]})}),e[35]=h,e[36]=w,e[37]=E):E=e[37],E}function D(e){return r.jsx(R,{message:e,selfId:"u-anne"},e.id)}function R(e){const t=A.c(14),{message:a,selfId:x}=e,s=a.authorId===x,g=`flex ${s?"justify-end":"justify-start"}`,m=`max-w-[70%] rounded-2xl px-4 py-2 text-sm leading-relaxed
        ${s?"bg-brand-blue text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`;let c;t[0]!==a.text?(c=r.jsx("p",{children:a.text}),t[0]=a.text,t[1]=c):c=t[1];const f=`mt-1 block text-[11px] opacity-75 ${s?"text-white":"text-gray-600 dark:text-gray-400"}`;let n;t[2]!==a.createdAt?(n=new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),t[2]=a.createdAt,t[3]=n):n=t[3];let l;t[4]!==f||t[5]!==n?(l=r.jsx("time",{className:f,children:n}),t[4]=f,t[5]=n,t[6]=l):l=t[6];let i;t[7]!==m||t[8]!==c||t[9]!==l?(i=r.jsxs("section",{className:m,children:[c,l]}),t[7]=m,t[8]=c,t[9]=l,t[10]=i):i=t[10];let d;return t[11]!==g||t[12]!==i?(d=r.jsx("article",{className:g,children:i}),t[11]=g,t[12]=i,t[13]=d):d=t[13],d}function z(e){const t=A.c(14),{onSend:a,disabled:x}=e,[s,g]=v.useState("");let m;t[0]!==a||t[1]!==s?(m=async function(_){_.preventDefault(),s.trim()&&(await a(s),g(""))},t[0]=a,t[1]=s,t[2]=m):m=t[2];const c=m;let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("label",{className:"sr-only",htmlFor:"message",children:"Skriv en melding"}),t[3]=f):f=t[3];let n;t[4]===Symbol.for("react.memo_cache_sentinel")?(n=b=>g(b.target.value),t[4]=n):n=t[4];let l;t[5]!==x||t[6]!==s?(l=r.jsx("textarea",{id:"message",className:"min-h-10 w-full resize-none rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white px-4 py-2 outline-none focus:border-brand-blue dark:focus:border-blue-400 focus:bg-white dark:focus:bg-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500",placeholder:"Skriv en melding...",value:s,onChange:n,disabled:x}),t[5]=x,t[6]=s,t[7]=l):l=t[7];let i;t[8]!==x?(i=r.jsx("button",{type:"submit",disabled:x,className:"rounded-xl bg-brand-blue hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-500 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50",children:"Send"}),t[8]=x,t[9]=i):i=t[9];let d;return t[10]!==c||t[11]!==l||t[12]!==i?(d=r.jsxs("form",{onSubmit:c,className:"flex items-center gap-3",children:[f,l,i]}),t[10]=c,t[11]=l,t[12]=i,t[13]=d):d=t[13],d}export{q as default};
//# sourceMappingURL=Messages-HJTbm-4D.js.map
